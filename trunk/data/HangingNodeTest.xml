<?xml version="1.0" encoding="UTF-8"?>
<fieldml>
  <!--
1______2____3
|      |    |
|      | *2 |
|      |    |
|  *1  4____5
|      |    |
|      | *3 |
6______7____8
-->
  <EnsembleDomain name="test_mesh.elements">
    <values>1  2  3  </values>
  </EnsembleDomain>
  

  <EnsembleDomain name="test_mesh.global_dofs">
    <values>1  2  3  4  5  6  7  </values>
  </EnsembleDomain>
  

  <MeshDomain dimensions="2" elementDomain="test_mesh.elements" name="test_mesh.domain">
    <shapes>
      <entry key="1" value="library.shape.quad.00_10_01_11" />
      <entry key="2" value="library.shape.quad.00_10_01_11" />
      <entry key="3" value="library.shape.quad.00_10_01_11" />
    </shapes>
  </MeshDomain>
  

  <ContinuousParameters defaultValue="[0.0]" name="test_mesh.dof_weights.bilinear.p1" valueDomain="library.weighting.1d">
    <parameterDomains>"test_mesh.global_dofs"  "test_mesh.elements"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>5  1  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>2  2  </keys>
        <ContinuousDomainValue>
          <values>0.5  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>6  2  </keys>
        <ContinuousDomainValue>
          <values>0.5  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>6  3  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousParameters defaultValue="[0.0]" name="test_mesh.dof_weights.bilinear.p2" valueDomain="library.weighting.1d">
    <parameterDomains>"test_mesh.global_dofs"  "test_mesh.elements"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>6  1  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>4  2  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>7  3  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousParameters defaultValue="[0.0]" name="test_mesh.dof_weights.bilinear.p3" valueDomain="library.weighting.1d">
    <parameterDomains>"test_mesh.global_dofs"  "test_mesh.elements"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>1  1  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>2  2  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>2  3  </keys>
        <ContinuousDomainValue>
          <values>0.5  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>6  3  </keys>
        <ContinuousDomainValue>
          <values>0.5  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousParameters defaultValue="[0.0]" name="test_mesh.dof_weights.bilinear.p4" valueDomain="library.weighting.1d">
    <parameterDomains>"test_mesh.global_dofs"  "test_mesh.elements"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>2  1  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>3  2  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>4  3  </keys>
        <ContinuousDomainValue>
          <values>1.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousAggregateEvaluator name="test_mesh.bilinear_lagrange.parameter_weights" valueDomain="library.bilinear_lagrange.parameters">
    <sourceFields>"test_mesh.dof_weights.bilinear.p1"  "test_mesh.dof_weights.bilinear.p2"  "test_mesh.dof_weights.bilinear.p3"  "test_mesh.dof_weights.bilinear.p4"  </sourceFields>
  </ContinuousAggregateEvaluator>
  

  <ContinuousParameters name="test_mesh.point.x" valueDomain="library.co-ordinates.rc.1d">
    <parameterDomains>"test_mesh.global_dofs"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>1  </keys>
        <ContinuousDomainValue>
          <values>0.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>2  </keys>
        <ContinuousDomainValue>
          <values>20.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>3  </keys>
        <ContinuousDomainValue>
          <values>30.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>4  </keys>
        <ContinuousDomainValue>
          <values>30.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>5  </keys>
        <ContinuousDomainValue>
          <values>0.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>6  </keys>
        <ContinuousDomainValue>
          <values>20.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>7  </keys>
        <ContinuousDomainValue>
          <values>30.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousParameters name="test_mesh.point.y" valueDomain="library.co-ordinates.rc.1d">
    <parameterDomains>"test_mesh.global_dofs"  </parameterDomains>
    <entries>
      <MapEntry>
        <keys>1  </keys>
        <ContinuousDomainValue>
          <values>20.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>2  </keys>
        <ContinuousDomainValue>
          <values>20.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>3  </keys>
        <ContinuousDomainValue>
          <values>20.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>4  </keys>
        <ContinuousDomainValue>
          <values>10.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>5  </keys>
        <ContinuousDomainValue>
          <values>0.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>6  </keys>
        <ContinuousDomainValue>
          <values>0.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
      <MapEntry>
        <keys>7  </keys>
        <ContinuousDomainValue>
          <values>0.0  </values>
        </ContinuousDomainValue>
      </MapEntry>
    </entries>
  </ContinuousParameters>
  

  <ContinuousCompositeEvaluator name="test_mesh.bilinear_lagrange.parameters.x" valueDomain="library.bilinear_lagrange.parameters">
    <operations>
      <MappedImportOperation sourceField="test_mesh.point.x" valueDomain="library.bilinear_lagrange.parameters" map="test_mesh.bilinear_lagrange.parameter_map" />
    </operations>
  </ContinuousCompositeEvaluator>
  

  <ContinuousCompositeEvaluator name="test_mesh.bilinear_lagrange.parameters.y" valueDomain="library.bilinear_lagrange.parameters">
    <operations>
      <MappedImportOperation sourceField="test_mesh.point.y" valueDomain="library.bilinear_lagrange.parameters" map="test_mesh.bilinear_lagrange.parameter_map" />
    </operations>
  </ContinuousCompositeEvaluator>
  

  <ContinuousAggregateEvaluator name="test_mesh.coordinates.xy" valueDomain="library.co-ordinates.rc.2d">
    <sourceFields>"test_mesh.coordinates.x"  "test_mesh.coordinates.y"  </sourceFields>
  </ContinuousAggregateEvaluator>
  

  <ContinuousMap name="test_mesh.bilinear_lagrange.parameter_map" weights="test_mesh.bilinear_lagrange.parameter_weights" iteratedDomain="test_mesh.global_dofs" />
  

  <PiecewiseTemplate name="test_mesh.coordinates.template" meshDomain="test_mesh.domain">
    <functions>
      <DirectBilinearLagrange dofsDomain="library.bilinear_lagrange.parameters" name="bilinear_lagrange" />
    </functions>
    <elementFunctions>
      <SimpleMapEntry key="1" value="bilinear_lagrange" />
      <SimpleMapEntry key="2" value="bilinear_lagrange" />
      <SimpleMapEntry key="3" value="bilinear_lagrange" />
    </elementFunctions>
  </PiecewiseTemplate>
  

  <PiecewiseField template="test_mesh.coordinates.template" name="test_mesh.coordinates.x" valueDomain="library.co-ordinates.rc.1d">
    <dofEvaluators>
      <SimpleMapEntry key="library.bilinear_lagrange.parameters" value="test_mesh.bilinear_lagrange.parameters.x" />
    </dofEvaluators>
  </PiecewiseField>
  

  <PiecewiseField template="test_mesh.coordinates.template" name="test_mesh.coordinates.y" valueDomain="library.co-ordinates.rc.1d">
    <dofEvaluators>
      <SimpleMapEntry key="library.bilinear_lagrange.parameters" value="test_mesh.bilinear_lagrange.parameters.y" />
    </dofEvaluators>
  </PiecewiseField>
  

</fieldml>

